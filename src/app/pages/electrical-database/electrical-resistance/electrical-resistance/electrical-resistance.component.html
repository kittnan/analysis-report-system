<div class="loading" *ngIf="LoadingPage">
  <div class="spinner">
  </div>
</div>

<div class="myInput mt-3" style="width: 100%" (mouseup)="this.toggleBT = false">
  <div class="col-lg-12">
    <div class="row mt-3 label">

      <div class="col-lg-12">
        <div class="row d-flex justify-content-between">
          <h5 class="d-flex align-items-center" style="margin: 0px;font-weight: bold;">Resistance Database.</h5>
          <div>
            <button (click)="ExportExcel()" class="btn btn-sm  text-primary"
              style="text-align: right; cursor: pointer;">Export <i class="bi bi-file-earmark-spreadsheet"></i></button>
          </div>
        </div>
      </div>

      <div class="col-lg-12 pl-0 pr-0 pt-2">
        <label class="B" for="" style="font-size: 19px; font-weight: bold;">Confirm input resistance of NG sample
          compare with Good sample</label>
        <div class="">
          <label for="" style="font-size: 19px; font-weight: bold;"> Model :</label><span class="blue"
            style="font-size: 19px;font-weight: 100;"> {{model}}</span>
        </div>
        <div class="row">
          <div class="" style="width: 27em;margin-left: 1em;">
            <label for="" style="font-size: 19px; font-weight: bold;"> Measurement Pattern : </label><span class="blue"
              style="font-size: 19px;font-weight: 100;"> {{pattern}}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div *ngIf="urlOldUse?.length > 0" class="col-lg-12">
      <label style="font-size: 19px; font-weight: bold;">Pin assignment</label>
      <div *ngFor="let item of urlOldUse">
        <img [id]="item.split('Resistance/')[1]" [src]="item" width="100%" height="100%"
          (mouseover)="magnify(item.split('Resistance/')[1], 3)" (mouseleave)="zoomOut()">
      </div>
    </div>
  </div>



  <div class="col row pt-3" id="registration" style="margin: 0;padding: 0;">
    <div class="mr-4 B" style="width: 18rem;padding-left: 16px;">
      <div class="row" style="width: 18rem;padding: 0;">
        <label class="myInput CLR">Resistance reference with GND (k ꭥ)</label>
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">No.</label>
        </div>
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">Name</label>
        </div>
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">Good</label>
        </div>
        <div class="" style="width: 6rem;">
          <label class="myInput CLR">NG sample</label>
        </div>
      </div>
    </div>
    <div class="mr-4 B" style="width: 18rem;padding-left: 16px;">
      <div class="row" style="width: 18rem;padding: 0;">
        <label class="myInput CLR">Resistance reference with VCC (k ꭥ)</label>
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">No.</label>
        </div>
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">Name</label>
        </div>
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">Good</label>
        </div>
        <div class="" style="width: 6rem;">
          <label class="myInput CLR">NG sample</label>
        </div>
      </div>
    </div>
    <div class="B" style="width: 26rem;padding-left: 16px;">
      <div class="row" style="width: 26rem;padding: 0;">
        <label class="myInput CLR">Resistance between terminal (k ꭥ)</label>
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">No.</label>
        </div>
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">No.</label>
        </div>
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">Name</label>
        </div>
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">Name</label>
        </div>
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">Good</label>
        </div>
        <div class="" style="width: 6rem;">
          <label class="myInput CLR">NG sample</label>
        </div>
      </div>
    </div>
  </div>


  <!-- </div> -->

  <div class="col row" style="margin: 0;padding: 0;">

    <div class="mr-4" style="width: 18rem;padding-left: 16px;">
      <div *ngFor="let row of data; let i=index" class="row" style="width: 18rem;padding: 0;">
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">{{row.number}}</label>
        </div>
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">{{row.name}}</label>
        </div>
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">{{row.good}}</label>
        </div>
        <div class="" *ngFor="let ng of row.ng_1; let i_ng=index">
          <input class="myInput text-center" [id]="('drop_0'+i)+i_ng"
            [ngClass]="{'myInputGreen': (ng.status == true && ng.value != null),'myInputRed': (ng.status == false && ng.value != null)}"
            [(ngModel)]="ng.value" type="number" style="width: 6rem" data-bs-toggle="tooltip" data-bs-html="true"
            (keyup)="calculator(row,i_ng,1)" (keyup.enter)="dropdown(i,i_ng,data,'drop_0')" [title]="row.number">
        </div>
      </div>
    </div>

    <div class="mr-4" style="width: 18rem;padding-left: 16px;">
      <div *ngFor="let row of data ; let i=index" class="row" style="width: 18rem;padding: 0;">
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">{{row.number}}</label>
        </div>
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">{{row.name}}</label>
        </div>
        <div class="" style="width: 4rem;">
          <label class="myInput CLR">{{row.good}}</label>
        </div>
        <div class="" *ngFor="let ng of row.ng_2; let i_ng=index">
          <input class="myInput text-center" [id]="('drop_1'+i)+i_ng"
            [ngClass]="{'myInputGreen': (ng.status == true && ng.value != null),'myInputRed': (ng.status == false && ng.value != null)}"
            [(ngModel)]="ng.value" type="number" style="width: 6rem" data-bs-toggle="tooltip" data-bs-html="true"
            (keyup)="calculator(row,i_ng,2)" (keyup.enter)="dropdown(i,i_ng,data,'drop_1')" [title]="row.number">
        </div>
      </div>
    </div>

    <div class="" style="width: 26rem;padding-left: 16px;">
      <div *ngFor="let row of data;let i = index" class="row" style="width: 26rem;padding: 0;">
        <div *ngIf="i <data.length-1" style="width: 4rem;">
          <label class="myInput CLR">{{row.number}}</label>
        </div>
        <div *ngIf="i <data.length-1" style="width: 4rem;">
          <label class="myInput CLR">{{data[i+1].number}}</label>
        </div>
        <div *ngIf="i <data.length-1" style="width: 4rem;">
          <label class="myInput CLR">{{row.name}}</label>
        </div>
        <div *ngIf="i <data.length-1" style="width: 4rem;">
          <label class="myInput CLR">{{data[i+1].name}}</label>
        </div>
        <div *ngIf="i <data.length-1" style="width: 4rem;">
          <label class="myInput CLR">X</label>
        </div>
        <div *ngFor="let ng of row.ng_3; let i_ng=index">
          <input *ngIf="i < data.length-1" class="myInput text-center" [id]="('drop_2'+i)+i_ng"
            [ngClass]="{'myInputGreen': (ng.status == true && ng.value != null),'myInputRed': (ng.status == false && ng.value != null)}"
            [(ngModel)]="ng.value" type="number" style="width: 6rem" data-bs-toggle="tooltip" data-bs-html="true"
            (keyup)="calculator(row,i_ng,3)" (keyup.enter)="dropdown_1(i,i_ng,data,'drop_2')" [title]="row.number">
        </div>
      </div>
    </div>
  </div>
  <div class="pt-3"></div>
</div>

<div class="row">
  <div class="col">
    <button (click)="BTC()" class="btn btn-sm btn-primary mr-0">EDIT IMAGE</button>
  </div>
</div>
<div [hidden]="!toggleBT" class="row pt-2">
  <div class="col-lg-12 pt-3">
    <label for="">File</label>
    <input class="ml-1" type="file" #fileUpload [multiple]="true" (change)="upload($event)">
  </div>
  <div class="col-lg-12">
    <ul style="margin-right: 3em;">
      <li *ngFor="let file of urlOldShow ;let i = index" class="d-flex align-items-center justify-content-between">
        {{i+1}}. {{file.name}}
        <span>
          <a target="_blank" title="ImageName" class="btn btn-sm btn-primary mr-0" style="cursor: pointer;"
            (click)="downloadImageOnly(file)"><i class="bi bi-download" style="font-size: 12px;"></i></a>
          <button class="btn btn-sm text-primary"
            (click)="onClickDel(file);deleteArray(this.urlOldUse, i)">Delete</button>
        </span>
      </li>
      <li *ngFor="let file of tempUpload ;let i = index" class="d-flex align-items-center justify-content-between">
        {{i+1+urlOldShow.length}}. {{file.name}}
        <span>
          {{file.size|fileSize}}
          <button class="btn btn-sm text-primary ml-2" (click)="onClickDel(file)">Delete</button>
        </span>
      </li>
      <!-- <tbody *ngIf="(urlOldShow.length == 0)&&(tempUpload.length == 0)" class="subtext-color">
          <tr>
            <td>
              No files.
            </td>
            <td>

            </td>
          </tr>
        </tbody> -->
    </ul>
  </div>


  <div class="col-lg-12">
    <div class="d-flex justify-content-center">
      <div class="col-lg-3">
        <!-- <span class="" [hidden]="!EmSize">{{this.EmSize|fileSize}}</span> -->
        <!-- {{this.EmSize}} -->
        <button [disabled]="disableSub || (this.EmSize / 1048576 > 30)" class="btn btn-block"
          (click)="submit();">update</button>
      </div>
    </div>
  </div>
</div>
